language: python
# see https://github.com/travis-ci/travis-ci/issues/9069#issuecomment-425720905
dist: xenial
sudo: required
python:
  - '3.4'
  - '3.5'
  - '3.6'
  - '3.7'
install:
  - pip install django=="$DJANGO"
env:
  - DJANGO=1.11
  - DJANGO=2.1
  - DJANGO=2.2
script:
  # see https://github.com/travis-ci/travis-ci/issues/7940
  - sudo rm -f /etc/boto.cfg
  - pip install -r test-requirements.txt
  - flake8
  - coverage run --source collectfast ./runtests.py
  - coveralls
matrix:
  exclude:
    - env: DJANGO=2.1
      python: '3.4'
    - env: DJANGO=2.2
      python: '3.4'
notifications:
  email: false
